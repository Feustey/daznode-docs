/**
 * Système de thème amélioré avec mode clair par défaut
 * Respecte prefers-color-scheme et permet l'override manuel
 */

:root {
  /* === Couleurs mode clair (défaut) === */
  --color-primary-h: 195;
  --color-primary-s: 100%;
  --color-primary-l: 50%;
  --color-primary: hsl(var(--color-primary-h), var(--color-primary-s), var(--color-primary-l));
  
  /* Couleurs neutres - mode clair */
  --color-background: #ffffff;
  --color-surface: #f8f9fa;
  --color-text: #1a1a1a;
  --color-text-muted: #666666;
  --color-heading: #2d3748;
  --color-border: #e2e8f0;
  --color-light: #f7fafc;
  
  /* Interface - mode clair */
  --color-sidebar: #ffffff;
  --color-header: #ffffff;
  --color-header-text: #2d3748;
  --color-footer: #f8f9fa;
  --color-nav-active: rgba(0, 177, 255, 0.1);
  
  /* Liens - mode clair */
  --color-link: #3182ce;
  --color-link-hover: #2c5aa0;
  
  /* États et feedback */
  --color-success: #38a169;
  --color-warning: #ed8936;
  --color-error: #e53e3e;
  --color-info: var(--color-primary);
  
  /* Ombres - mode clair */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
}

/* Mode sombre automatique selon préférences système */
@media (prefers-color-scheme: dark) {
  :root {
    /* Couleurs neutres - mode sombre */
    --color-background: #1a202c;
    --color-surface: #2d3748;
    --color-text: #f7fafc;
    --color-text-muted: #a0aec0;
    --color-heading: #e2e8f0;
    --color-border: #4a5568;
    --color-light: #2d3748;
    
    /* Interface - mode sombre */
    --color-sidebar: #2d3748;
    --color-header: #1a202c;
    --color-header-text: #f7fafc;
    --color-footer: #2d3748;
    --color-nav-active: rgba(0, 177, 255, 0.2);
    
    /* Liens - mode sombre */
    --color-link: #63b3ed;
    --color-link-hover: #90cdf4;
    
    /* États et feedback - mode sombre */
    --color-success: #68d391;
    --color-warning: #fbb040;
    --color-error: #fc8181;
    
    /* Ombres - mode sombre */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
    --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.3);
  }
}

/* Classes pour override manuel */
.theme-light {
  /* Force mode clair */
  --color-background: #ffffff;
  --color-surface: #f8f9fa;
  --color-text: #1a1a1a;
  --color-text-muted: #666666;
  --color-heading: #2d3748;
  --color-border: #e2e8f0;
  --color-light: #f7fafc;
  
  --color-sidebar: #ffffff;
  --color-header: #ffffff;
  --color-header-text: #2d3748;
  --color-footer: #f8f9fa;
  --color-nav-active: rgba(0, 177, 255, 0.1);
  
  --color-link: #3182ce;
  --color-link-hover: #2c5aa0;
  
  --color-success: #38a169;
  --color-warning: #ed8936;
  --color-error: #e53e3e;
  
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
  
  color-scheme: light;
}

.theme-dark {
  /* Force mode sombre */
  --color-background: #1a202c;
  --color-surface: #2d3748;
  --color-text: #f7fafc;
  --color-text-muted: #a0aec0;
  --color-heading: #e2e8f0;
  --color-border: #4a5568;
  --color-light: #2d3748;
  
  --color-sidebar: #2d3748;
  --color-header: #1a202c;
  --color-header-text: #f7fafc;
  --color-footer: #2d3748;
  --color-nav-active: rgba(0, 177, 255, 0.2);
  
  --color-link: #63b3ed;
  --color-link-hover: #90cdf4;
  
  --color-success: #68d391;
  --color-warning: #fbb040;
  --color-error: #fc8181;
  
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.3);
  
  color-scheme: dark;
}

/* Transitions fluides pour les changements de thème */
* {
  transition: background-color 0.2s ease, 
              color 0.2s ease, 
              border-color 0.2s ease,
              box-shadow 0.2s ease;
}

/* Optimisations pour les éléments qui ne doivent pas avoir de transition */
img, video, iframe, canvas, svg, .no-transition {
  transition: none !important;
}

/* Amélioration du contraste pour l'accessibilité */
.theme-light {
  --contrast-ratio-aa: 4.5;
  --contrast-ratio-aaa: 7;
}

.theme-dark {
  --contrast-ratio-aa: 3;
  --contrast-ratio-aaa: 4.5;
}

/* Focus visible amélioré */
:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Gestion du thème pour les formulaires */
input, textarea, select {
  background-color: var(--color-background);
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

input:focus, textarea:focus, select:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(0, 177, 255, 0.1);
}

/* Code blocks avec thème */
pre, code {
  background-color: var(--color-light);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}

.theme-dark pre,
.theme-dark code {
  background-color: #1e2125;
  border-color: #3a3f45;
}

/* Blockquotes avec thème */
blockquote {
  background: linear-gradient(90deg, 
    rgba(0, 177, 255, 0.1), 
    transparent
  );
  border-left: 4px solid var(--color-primary);
  color: var(--color-text);
}

/* Cards avec thème */
.card {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-sm);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

/* Navigation avec thème */
.nav-link {
  color: var(--color-text);
}

.nav-link:hover,
.nav-link.active {
  background-color: var(--color-nav-active);
  color: var(--color-primary);
}

/* Boutons avec thème */
.btn-primary {
  background: linear-gradient(45deg, var(--color-primary), #4dccff);
  color: white;
  border: none;
}

.btn-secondary {
  background: transparent;
  color: var(--color-primary);
  border: 2px solid var(--color-primary);
}

.btn-secondary:hover {
  background: var(--color-primary);
  color: white;
}

/* Footer avec thème */
footer {
  background-color: var(--color-footer);
  border-top: 1px solid var(--color-border);
  color: var(--color-text);
}

/* Sidebar avec thème */
.sidebar {
  background-color: var(--color-sidebar);
  border-right: 1px solid var(--color-border);
}

/* Header avec thème */
header {
  background-color: var(--color-header);
  color: var(--color-header-text);
  border-bottom: 1px solid var(--color-border);
}

/* Amélioration de la lisibilité */
body {
  background-color: var(--color-background);
  color: var(--color-text);
}

h1, h2, h3, h4, h5, h6 {
  color: var(--color-heading);
}

a {
  color: var(--color-link);
}

a:hover {
  color: var(--color-link-hover);
}

/* Indicateurs de statut */
.status-success {
  color: var(--color-success);
}

.status-warning {
  color: var(--color-warning);
}

.status-error {
  color: var(--color-error);
}

.status-info {
  color: var(--color-info);
}

/* Mode high contrast pour accessibilité */
@media (prefers-contrast: high) {
  :root {
    --color-primary: #0066cc;
    --color-background: #ffffff;
    --color-text: #000000;
    --color-border: #000000;
  }
  
  .theme-dark {
    --color-primary: #66b3ff;
    --color-background: #000000;
    --color-text: #ffffff;
    --color-border: #ffffff;
  }
}